(window.webpackJsonp=window.webpackJsonp||[]).push([[173],{895:function(t,s,a){"use strict";a.r(s);var n=a(13),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"微前端框架-qiankun"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#微前端框架-qiankun"}},[t._v("#")]),t._v(" 微前端框架-qiankun")]),t._v(" "),a("h2",{attrs:{id:"_1、简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、简介"}},[t._v("#")]),t._v(" 1、简介")]),t._v(" "),a("p",[t._v("framework-qiankun  是一个基于qiankun + sanhui 的微前端实现库，旨在帮助大家能更简单、无痛的构建一个生产可用微前端架构系统。解决iframe不能解决的问题, 如：")]),t._v(" "),a("ol",[a("li",[t._v("url 不同步。浏览器刷新 iframe url 状态丢失、后退前进按钮无法使用。")]),t._v(" "),a("li",[t._v("UI 不同步，DOM 结构不共享。想象一下屏幕右下角 1/4 的 iframe 里来一个带遮罩层的弹框，同时我们要求这个弹框要浏览器居中显示，还要浏览器 resize 时自动居中.")]),t._v(" "),a("li",[t._v("全局上下文完全隔离，内存变量不共享。iframe 内外系统的通信、数据同步等需求，主应用的 cookie 要透传到根域名都不同的子应用中实现免登效果。")]),t._v(" "),a("li",[t._v("慢。每次子应用进入都是一次浏览器上下文重建、资源重新加载的过程。")])]),t._v(" "),a("h2",{attrs:{id:"_2、代码下载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、代码下载"}},[t._v("#")]),t._v(" 2、代码下载")]),t._v(" "),a("p",[t._v("下载代码包直接运行即可看效果，主应用内嵌"),a("code",[t._v("子应用个人端")]),t._v("、"),a("code",[t._v("子应用企业端")]),t._v("、"),a("code",[t._v("子应用")]),t._v("部分页面。")]),t._v(" "),a("p",[t._v("下载应用用于开发时请删掉 "),a("code",[t._v("src/layout/Index.vue")]),t._v("里面的如下代码")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/lj107571/imgformd/raw/master/image-20210926154203063.png",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"_3、基础框架转为微前端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、基础框架转为微前端"}},[t._v("#")]),t._v(" 3、基础框架转为微前端")]),t._v(" "),a("h3",{attrs:{id:"_3-1-主应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-主应用"}},[t._v("#")]),t._v(" 3.1 主应用")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("安装qiankun")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("$ yarn add qiankun # 或者 npm i qiankun -S\n")])])])]),t._v(" "),a("li",[a("p",[t._v("新建"),a("code",[t._v("src/utils/bus.js")]),t._v("代码如下")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("export default new Vue()\n")])])])]),t._v(" "),a("li",[a("p",[t._v("新建 "),a("code",[t._v("src/qiankun/index.js")]),t._v(" 代码如下")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("import { registerMicroApps, start } from 'qiankun';\nimport bus from '@/utils/bus'\nimport store from '@/store'\n\n// 将bus挂载在Vue原型，保持父子应用一致\nVue.prototype.$bus = bus\n\nregisterMicroApps([\n  {\n    name: 'QY', \n    entry: process.env.VUE_APP_QY_WEB,\n    container: '#qiankun_QY',\n    activeRule: '/QY',\n  },\n  {\n    name: 'sub', \n    entry: process.env.VUE_APP_sub_WEB,\n    container: '#qiankun_sub',\n    activeRule: '/sub',\n    props: {\n      bus,\n      systemCode: store.state.systemCode\n    }\n  }\n]);\n\nexport default start\n")])])])]),t._v(" "),a("li",[a("p",[t._v("新建"),a("code",[t._v("src/views/admin/sub/Index.vue")]),t._v("文件，用于匹配子应用")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("<template>\n  <div class=\"sub\">\n    <div id=\"qiankun_sub\" v-show=\"!id\"></div>\n  </div>\n</template>\n\n<script>\nimport start from '@/qiankun/index'\nexport default {\n  data () {\n    return {\n      id: '',\n      type: ''\n    }\n  },\n  mounted () {\n    // 启动微前端\n    if (!window.qiankunStarted) {\n      window.qiankunStarted = true;\n      start();\n    }\n    // 监听代办\n    this.$bus.$on('qiankun-backlog', (e) => {\n      // 点击代办触发\n    })\n  },\n  beforeDestroy () { // 销毁监听\n    this.$bus.$off('qiankun-backlog')\n  }\n}\n<\/script>\n")])])])]),t._v(" "),a("li",[a("p",[t._v("新建"),a("code",[t._v("src/views/admin/QY/Index.vue")]),t._v("文件，用于匹配企业端")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("<template>\n  <div id=\"qiankun_QY\"></div>\n</template>\n\n<script>\nimport start from '@/qiankun/index'\nexport default {\n  mounted () {\n    // 启动微前端\n    if (!window.qiankunStarted) {\n      window.qiankunStarted = true;\n      start();\n    }\n  }\n}\n<\/script>\n")])])])]),t._v(" "),a("li",[a("p",[t._v("配置上两个文件的路由如下：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("const Layout = () => import('@/layout/Index')\n\nexport default [\n  {\n    path: '/login',\n    meta: { title: '登录', isLogin: false},\n    component: SANHUI.Login\n  },\n  {\n    path: '/',\n    meta: { title: '布局'},\n    name: 'layout',\n    component: () => import('@/layout/Index'),\n    children: [\n      {\n        path: '/userInfo',\n        meta: { title: '个人信息', isMenu: false},\n        component: SANHUI.UserInfo\n      },\n      ...module,\n      {\n        path: '/405',\n        meta: { title: '405', isLogin: false},\n        component: SANHUI.Error405\n      },\n      {\n        path: '/sub/*',\n        meta: { title: '子应用', isMenu: false},\n        component: () => import('@/views/admin/sub/Index')\n      },\n      {\n        path: '/QY/*',\n        meta: { title: '子应用企业端', isMenu: false},\n        component: () => import('@/views/admin/QY/Index')\n      }\n    ]\n  },\n  {\n    path: '*',\n    meta: { title: '404', isLogin: false},\n    component: SANHUI.Error404\n  }\n]\n")])])])]),t._v(" "),a("li",[a("p",[t._v("配置getAccessToken，应用嵌入重新拿token")]),t._v(" "),a("p",[t._v("在"),a("code",[t._v("src/layout/Index.vue")]),t._v("中加入getAccessToken方法，代码如下：")]),t._v(" "),a("p",[t._v("​\t\t其中 "),a("code",[t._v("ACCESS_TOKEN")]),t._v(" 为 "),a("code",[t._v("/getAccessToken")]),t._v(" 具体请参考 "),a("code",[t._v("中台2.1框架/网页端框架")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("<template>\n  <sh-layout ref=\"layout\" @getAccessToken=\"getAccessToken\">\n    <RightNav></RightNav>\n  </sh-layout>\n</template>\n\n<script>\nimport RightNav from './components/RightNav'\nimport { ACCESS_TOKEN } from '@/apis/global'\nexport default {\n  components: {\n    ShLayout: SANHUI.Layout,\n    RightNav\n  },\n  methods: {\n    getAccessToken () {\n      this.$get(ACCESS_TOKEN)\n    }\n  }\n}\n<\/script>\n\n")])])])])]),t._v(" "),a("h3",{attrs:{id:"_3-2-子应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-子应用"}},[t._v("#")]),t._v(" 3.2 子应用")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("在配置文件"),a("code",[t._v("vue.config.js")]),t._v("中添加 如下代码：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("// 在devServer中添加允许跨域\nheaders: {\n\t'Access-Control-Allow-Origin': '*',\n},\n\n// 在configureWebpack/output中添加\nlibrary: `$[name].[hash]`,\nlibraryTarget: 'umd', // 把微应用打包成 umd 库格式\njsonpFunction: `webpackJsonp_[name]`,\n")])])])]),t._v(" "),a("li",[a("p",[t._v("在"),a("code",[t._v("src/router/index.js")]),t._v("中修改如下代码：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("// 注释如下代码\n// const router = new VueRouter({\n//   mode: 'history',\n//   base: process.env.BASE_URL,\n//   routes\n// })\n\n// // 路由守卫\n// router.beforeEach((to, from, next) => {\n//   Vue.prototype.$beforeRouter(to, from, next, process.env, Vue)\n// })\n\n// 抛出routes\nexport default routes\n\n")])])])]),t._v(" "),a("li",[a("p",[t._v("在"),a("code",[t._v("src/main.js")]),t._v("中修改如下代码")]),t._v(" "),a("p",[t._v("修改：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("// import router from './router'\nimport routes from './router'\n")])])]),a("p",[t._v("删除：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("\nconst vm = new Vue({\n  router,\n  store,\n  render: h => h(App)\n}).$mount('#app')\n\nexport default vm\n")])])]),a("p",[t._v("添加：（"),t._v("）")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("// 微前端 - 子应用配置\nlet router = null;\nlet instance = null;\n\nif (window.__POWERED_BY_QIANKUN__) {\n  __webpack_public_path__ = window.__INJECTED_PUBLIC_PATH_BY_QIANKUN__;\n}\n\n\n  //下面的 /sub  与主应用  registerMicroApps 中的  activeRule 字段对应\nfunction render(props = {}) {\n  const { container } = props;\n  router = new VueRouter({\n    base: window.__POWERED_BY_QIANKUN__ ? '/sub' : '/',  // 抛出路由加前缀\n    mode: 'history',\n    routes,\n  });\n  router.beforeEach((to, from, next) => {\n    Vue.prototype.$beforeRouter(to, from, next, process.env, Vue)\n  })\n  \n\n  instance = new Vue({\n    router,\n    store,\n    render: h => h(App),\n  }).$mount(container ? container.querySelector('#app') : '#app');\n}\n\nif (!window.__POWERED_BY_QIANKUN__) {\n  render();\n}\nexport default instance\n\n\nexport async function bootstrap() {\n  console.log('[vue] vue app bootstraped');\n}\n\nexport async function mount(props) {\n  //props 包含主应用传递的参数  也包括为子应用 创建的节点信息\n  if (props.systemCode) {\n    store.state.systemCode = props.systemCode\n  }\n  render(props);\n}\n\nexport async function unmount() {\n  instance.$destroy();\n  instance = null;\n  router = null;\n}\n\n")])])])])]),t._v(" "),a("p",[a("strong",[t._v("这里需要注意的是如果使用的是"),a("code",[t._v("base: window.__POWERED_BY_QIANKUN__ ? '/zhgd' : '/', // 抛出路由加前缀")]),t._v("抛出路由加前缀,那么在父应用中获取路由时如"),a("code",[t._v("/zhgd/group")]),t._v("拿到的是/group")])]),t._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[a("p",[t._v("新建"),a("code",[t._v("src/router/module/other.js")]),t._v("把要嵌入主应用的页面重新抛出")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("export default  {\n  path: '/other',\n  meta: { title: '布局', isLogin: false},\n  component: () => import('@/layout/components/OtherBlankLayout'),\n    children: [\n    {\n      path: '/other/index',\n      meta: { title: '首页'},\n      component: () => import('@/views/admin/index/Index')\n    },\n    {\n      path: '/other/page',\n      meta: { title: '页面1'},\n      component: () => import('@/views/admin/page/Index')\n    },\n    {\n      path: '/other/page2',\n      meta: { title: '页面2'},\n      component: () => import('@/views/admin/page2/Index')\n    }\n  ]\n}\n")])])])]),t._v(" "),a("li",[a("p",[t._v("修"),a("code",[t._v("layout/components/OtherBlankLayout.vue")]),t._v("代码如下 (更多请参考："),a("RouterLink",{attrs:{to:"/access/web/#_4-2-抛出嵌入页"}},[t._v("网页端框架 4-2-抛出嵌入页")]),t._v(")")],1),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("if (code) { // iframe 嵌入\n\tthis.getUserInfo(code)\n} else {  // 微前端嵌入\n\tthis.getUserInfo()\n}\n")])])])]),t._v(" "),a("li",[a("p",[t._v("在"),t._v("共享资源的script标签加ignore，如")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('<script src="/sanhcdn/vue/dist/vue.min.js" ignore><\/script>\n....\n')])])]),a("p",[t._v("如下：")])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/lj107571/imgformd/raw/master/image-20211122102715924.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"_3-3-子应用菜单"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-子应用菜单"}},[t._v("#")]),t._v(" 3.3 子应用菜单")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("个人端：全部以"),a("code",[t._v("/sub/other/...")]),t._v(" 开头，例如： 代办事项："),a("code",[t._v("/sub/other/backlogList")])])]),t._v(" "),a("li",[a("p",[t._v("企业端：全部以"),a("code",[t._v("/QY/other/...")]),t._v("开头，例如： 菜单管理："),a("code",[t._v("/sub/other/selfMenu")])]),t._v(" "),a("p",[t._v("路由后缀与 "),a("RouterLink",{attrs:{to:"/access/web/#_4-1-嵌入组织中心、待办"}},[t._v("iframe嵌入/4-1-嵌入组织中心、待办")]),t._v("保持一致")],1)])]),t._v(" "),a("h2",{attrs:{id:"_4、服务器配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、服务器配置"}},[t._v("#")]),t._v(" 4、服务器配置")]),t._v(" "),a("h3",{attrs:{id:"_4-1-nginx-部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-nginx-部署"}},[t._v("#")]),t._v(" 4.1 nginx 部署")]),t._v(" "),a("p",[t._v("在nginx.config配置：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("// 允许资源跨域\nadd_header Access-Control-Allow-Origin *;\nadd_header Access-Control-Allow-Methods 'GET, POST, OPTIONS';\nadd_header Access-Control-Allow-Headers 'DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization';\n\nif ($request_method = 'OPTIONS') {\n\treturn 204;\n}\n// 解决路由history模式下刷新丢失问题\ntry_files $uri $uri/ /index.html;\n\n")])])]),a("h3",{attrs:{id:"_4-2-jenkins-部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-jenkins-部署"}},[t._v("#")]),t._v(" 4.2 jenkins 部署")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("在代码里修改"),a("code",[t._v("Dockerfile")]),t._v("文件")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("FROM nginx:1.17.3-alpine\n\nMAINTAINER zfe\n\nENV TZ=Asia/Shanghai\nRUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone\n\nWORKDIR /\n\nADD dist/  /usr/share/nginx/html/\n\nARG PROFILE_ACTIVE\nENV PROFILE_ACTIVE_ENV $PROFILE_ACTIVE\n\nCOPY nginx.conf /etc/nginx/conf.d/default.conf\n\nCMD sed -i \"28i\\\\    gzip_static on;\\\\n    gzip_proxied expired no-cache no-store private auth; \\n\" /etc/nginx/nginx.conf && nginx -g 'daemon off;'\n")])])])]),t._v(" "),a("li",[a("p",[t._v("在代码根目录新增"),a("code",[t._v("nginx.conf")]),t._v("文件")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("server {\n    listen       80;\n    server_name  localhost;\n\n    #charset koi8-r;\n    #access_log  /var/log/nginx/host.access.log  main;\n\n    location / {\n        add_header Access-Control-Allow-Origin *;\n        add_header Access-Control-Allow-Methods 'GET, POST, OPTIONS';\n        add_header Access-Control-Allow-Headers 'DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization';\n\n        if ($request_method = 'OPTIONS') {\n            return 204;\n        }\n        root   /usr/share/nginx/html;\n        try_files $uri $uri/ /index.html;\n        index  index.html index.htm;\n    }\n\n    error_page   500 502 503 504  /50x.html;\n    location = /50x.html {\n        root   /usr/share/nginx/html;\n    }\n}\n")])])])])]),t._v(" "),a("h2",{attrs:{id:"_5、应用之间互调"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5、应用之间互调"}},[t._v("#")]),t._v(" 5、应用之间互调")]),t._v(" "),a("p",[t._v("如：代办 （"),t._v("）")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("在子应用中")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("// 点击代办-触发事件总线\nthis.$bus.$emit('qiankun-backlog', param)\n// 监听代办-刷新列表\nthis.$bus.$on('qiankun-backlog-loadList', (e) => {\n\tthis.loadList()\n})\n")])])])]),t._v(" "),a("li",[a("p",[t._v("在业务系统中")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("// 监听代办事件触发\nthis.$bus.$on('qiankun-backlog', (e) => {\n   // e 代办传过来的参数\n})\n// 触发代办列表刷新\nthis.$bus.$emit('qiankun-backlog-loadList')\n\n")])])])]),t._v(" "),a("li",[a("p",[t._v("最后在beforeDestroy中销毁监听")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("// 业务系统\n  beforeDestroy () { // 销毁监听\n    this.$bus.$off('qiankun-backlog')\n  }\n// 子应用\n  beforeDestroy () { // 销毁监听\n    this.$bus.$off('qiankun-backlog-loadList')\n  }\n")])])])]),t._v(" "),a("li",[a("p",[t._v("微前端待办打开需要配置systemCode与主应用一致")])])]),t._v(" "),a("h2",{attrs:{id:"_6、其他问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6、其他问题"}},[t._v("#")]),t._v(" 6、其他问题")]),t._v(" "),a("h3",{attrs:{id:"_6-1-静态资源加载错误"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-静态资源加载错误"}},[t._v("#")]),t._v(" 6.1 静态资源加载错误")]),t._v(" "),a("p",[t._v("把引入路径改为绝对路径，如")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('<script src="/sanhcdn/vue/dist/vue.min.js"><\/script>\n')])])]),a("h3",{attrs:{id:"_6-2-vue-pdf-微前端调用报错"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-vue-pdf-微前端调用报错"}},[t._v("#")]),t._v(" 6.2 vue-pdf 微前端调用报错")]),t._v(" "),a("p",[t._v("在源码里面的"),a("code",[t._v("vuePdfNoSss.vue")]),t._v("里面把")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" PdfjsWorker "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'worker-loader!pdfjs-dist/es5/build/pdf.worker.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t\t\n")])])]),a("p",[t._v("改为")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" PdfjsWorker "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pdfjs-dist/es5/build/pdf.worker.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("在vue.config.js的module.export中添加")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("\n"),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("chainWebpack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("config")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("module\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rule")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'worker'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.worker\\.js$")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'worker-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("loader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'worker-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("options")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("inline")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("fallback")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("package.json里添加")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"dependencies"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"pdfjs-dist"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2.7.570"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"vue-resize-sensor"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^2.0.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"worker-loader"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^2.0.0"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("引用方式改为")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" pdf "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./pdf/vuePdfNoSss'")]),t._v("\n")])])]),a("h3",{attrs:{id:"_6-3-子应用打开会改变主应用项目title"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-子应用打开会改变主应用项目title"}},[t._v("#")]),t._v(" 6.3 子应用打开会改变主应用项目title")]),t._v(" "),a("p",[t._v("在子应用中：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("删除"),a("code",[t._v("/store/index.js")]),t._v("的")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("state: {\n\tprojectName: '项目名称'\n\t...\n},\nmutations: {\n\tprojectInfor(state, payload) {\n    \tstate.projectInfor = payload\n    },\n    ...\n}\n")])])])]),t._v(" "),a("li",[a("p",[t._v("删除"),a("code",[t._v("main.js")]),t._v("里的")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("document.title = store.state.projectName\n")])])])]),t._v(" "),a("li",[a("p",[t._v("在"),a("code",[t._v(".env")]),t._v("文件中新增")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("VUE_APP_PROJRCT_NAME = '项目名称'\n")])])])]),t._v(" "),a("li",[a("p",[t._v("在"),a("code",[t._v("index.html")]),t._v("中新增")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("<title><%= VUE_APP_PROJRCT_NAME %></title>\n")])])]),a("h2",{attrs:{id:"项目中使用了百度地图等组件-会出现在子应用中无法使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目中使用了百度地图等组件-会出现在子应用中无法使用"}},[t._v("#")]),t._v(" 项目中使用了百度地图等组件，会出现在子应用中无法使用")]),t._v(" "),a("p",[t._v("excludeAssetFilter：(assetUrl: string) => boolean - 可选，指定部分特殊的动态加载的微应用资源（css/js) 不被qiankun 劫持处理")])])]),t._v(" "),a("p",[t._v("更新qiankun版本至2.0.17,在start中添 excludeAssetFilter，在主应用中引入script标签")]),t._v(" "),a("p",[t._v("建议将地图放到主应用加载，微应用也引入这个地图 js（独立运行时使用），但是给 script 标签加上 ignore 属性")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("excludeAssetFilter")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("assetUrl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" whiteList "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" whiteWords "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'baidu'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'map'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("whiteList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("includes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("assetUrl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" whiteWords"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("some")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("w")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" assetUrl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("includes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("w"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("img",{attrs:{src:"https://gitee.com/lj107571/imgformd/raw/master/20220225145649.png",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"qiankun框架中微应用之间如何跳转qiankun框架中微应用之间如何跳转"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#qiankun框架中微应用之间如何跳转qiankun框架中微应用之间如何跳转"}},[t._v("#")]),t._v(" qiankun框架中微应用之间如何跳转qiankun框架中微应用之间如何跳转")]),t._v(" "),a("ol",[a("li",[t._v("通过history.pushState()方式进行跳转")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("history"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pushState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/app1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("跳转"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("将主应用的路由实例传递给子应用，子应用使用主应用实例进行跳转")])]),t._v(" "),a("p",[a("strong",[t._v("封装成方法")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("qiankunJump")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mainRouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" params")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mainRouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用主应用路由实例跳转")]),t._v("\n    mainRouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("path")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("query")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" params "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 未传递主应用路由实例，传统方式跳转")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" searchParams "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'?'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" targetUrl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" url\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("typeOf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'object'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("keys")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("keys")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("item")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      searchParams "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("item=")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("&")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    targetUrl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" targetUrl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" searchParams"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("slice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" searchParams"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("history"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pushState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" targetUrl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("参考："),a("a",{attrs:{href:"https://juejin.cn/post/6844904185910018062#heading-12",target:"_blank",rel:"noopener noreferrer"}},[t._v("微前端方案实践及总结"),a("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);