<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>博客首页</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/Vimalate/resb.jpg">
    <meta name="description" content="Vimalakirti的前端记录">
    <meta name="keywords" content="Vimalakirti的前端笔记，Vimalakirti的前端博客">
    <meta name="author" content="Vimalakirti,呛再首，枪在手">
    
    <link rel="preload" href="/Vimalate/assets/css/0.styles.3e4debc4.css" as="style"><link rel="preload" href="/Vimalate/assets/js/app.a925979d.js" as="script"><link rel="preload" href="/Vimalate/assets/js/2.ac384c18.js" as="script"><link rel="preload" href="/Vimalate/assets/js/213.d07b4ced.js" as="script"><link rel="preload" href="/Vimalate/assets/js/7.0ea86ada.js" as="script"><link rel="prefetch" href="/Vimalate/assets/js/10.9f2ffacf.js"><link rel="prefetch" href="/Vimalate/assets/js/100.f88a3a87.js"><link rel="prefetch" href="/Vimalate/assets/js/101.c741b520.js"><link rel="prefetch" href="/Vimalate/assets/js/102.cbd6e122.js"><link rel="prefetch" href="/Vimalate/assets/js/103.74815b76.js"><link rel="prefetch" href="/Vimalate/assets/js/104.4f2a50df.js"><link rel="prefetch" href="/Vimalate/assets/js/105.279d7a9a.js"><link rel="prefetch" href="/Vimalate/assets/js/106.79a32957.js"><link rel="prefetch" href="/Vimalate/assets/js/107.25b48ce9.js"><link rel="prefetch" href="/Vimalate/assets/js/108.93314856.js"><link rel="prefetch" href="/Vimalate/assets/js/109.f43eab5e.js"><link rel="prefetch" href="/Vimalate/assets/js/11.bd0effaf.js"><link rel="prefetch" href="/Vimalate/assets/js/110.6af8587d.js"><link rel="prefetch" href="/Vimalate/assets/js/111.fbec0e7a.js"><link rel="prefetch" href="/Vimalate/assets/js/112.8ea277db.js"><link rel="prefetch" href="/Vimalate/assets/js/113.c25ab38c.js"><link rel="prefetch" href="/Vimalate/assets/js/114.ed5ff73e.js"><link rel="prefetch" href="/Vimalate/assets/js/115.27b340c4.js"><link rel="prefetch" href="/Vimalate/assets/js/116.13c62f2f.js"><link rel="prefetch" href="/Vimalate/assets/js/117.a4988c72.js"><link rel="prefetch" href="/Vimalate/assets/js/118.fb0dcaaa.js"><link rel="prefetch" href="/Vimalate/assets/js/119.ecae9f09.js"><link rel="prefetch" href="/Vimalate/assets/js/12.a845b49f.js"><link rel="prefetch" href="/Vimalate/assets/js/120.ebd0e61c.js"><link rel="prefetch" href="/Vimalate/assets/js/121.ead732f6.js"><link rel="prefetch" href="/Vimalate/assets/js/122.db243d88.js"><link rel="prefetch" href="/Vimalate/assets/js/123.a921fa86.js"><link rel="prefetch" href="/Vimalate/assets/js/124.d96c91f4.js"><link rel="prefetch" href="/Vimalate/assets/js/125.0c02dabb.js"><link rel="prefetch" href="/Vimalate/assets/js/126.93bdbfdf.js"><link rel="prefetch" href="/Vimalate/assets/js/127.54b524f8.js"><link rel="prefetch" href="/Vimalate/assets/js/128.6e508e37.js"><link rel="prefetch" href="/Vimalate/assets/js/129.0d7d74ec.js"><link rel="prefetch" href="/Vimalate/assets/js/13.90225f0f.js"><link rel="prefetch" href="/Vimalate/assets/js/130.f591c413.js"><link rel="prefetch" href="/Vimalate/assets/js/131.ceac1d06.js"><link rel="prefetch" href="/Vimalate/assets/js/132.96d3a1c3.js"><link rel="prefetch" href="/Vimalate/assets/js/133.88ef0a4b.js"><link rel="prefetch" href="/Vimalate/assets/js/134.a279c744.js"><link rel="prefetch" href="/Vimalate/assets/js/135.3fb8f1cf.js"><link rel="prefetch" href="/Vimalate/assets/js/136.46af0aa5.js"><link rel="prefetch" href="/Vimalate/assets/js/137.4db45caf.js"><link rel="prefetch" href="/Vimalate/assets/js/138.dbd9ffda.js"><link rel="prefetch" href="/Vimalate/assets/js/139.3ee220fd.js"><link rel="prefetch" href="/Vimalate/assets/js/14.6c1f3b45.js"><link rel="prefetch" href="/Vimalate/assets/js/140.2fd7a5f7.js"><link rel="prefetch" href="/Vimalate/assets/js/141.fecdf27c.js"><link rel="prefetch" href="/Vimalate/assets/js/142.22acbd37.js"><link rel="prefetch" href="/Vimalate/assets/js/143.5d718e20.js"><link rel="prefetch" href="/Vimalate/assets/js/144.abe41835.js"><link rel="prefetch" href="/Vimalate/assets/js/145.96cb6472.js"><link rel="prefetch" href="/Vimalate/assets/js/146.1ad1da54.js"><link rel="prefetch" href="/Vimalate/assets/js/147.2223f983.js"><link rel="prefetch" href="/Vimalate/assets/js/148.b080352c.js"><link rel="prefetch" href="/Vimalate/assets/js/149.c894dc60.js"><link rel="prefetch" href="/Vimalate/assets/js/15.5b2f6605.js"><link rel="prefetch" href="/Vimalate/assets/js/150.c7e8589d.js"><link rel="prefetch" href="/Vimalate/assets/js/151.e0966084.js"><link rel="prefetch" href="/Vimalate/assets/js/152.d126ef97.js"><link rel="prefetch" href="/Vimalate/assets/js/153.43b4638f.js"><link rel="prefetch" href="/Vimalate/assets/js/154.948463e3.js"><link rel="prefetch" href="/Vimalate/assets/js/155.56c70595.js"><link rel="prefetch" href="/Vimalate/assets/js/156.64523ed1.js"><link rel="prefetch" href="/Vimalate/assets/js/157.90f76b35.js"><link rel="prefetch" href="/Vimalate/assets/js/158.aff7ff14.js"><link rel="prefetch" href="/Vimalate/assets/js/159.70c87bf6.js"><link rel="prefetch" href="/Vimalate/assets/js/16.cba63897.js"><link rel="prefetch" href="/Vimalate/assets/js/160.b6cde3c8.js"><link rel="prefetch" href="/Vimalate/assets/js/161.c1a28535.js"><link rel="prefetch" href="/Vimalate/assets/js/162.cb02114a.js"><link rel="prefetch" href="/Vimalate/assets/js/163.b1ff4d0a.js"><link rel="prefetch" href="/Vimalate/assets/js/164.ed7b279f.js"><link rel="prefetch" href="/Vimalate/assets/js/165.9755fddb.js"><link rel="prefetch" href="/Vimalate/assets/js/166.d6c8111b.js"><link rel="prefetch" href="/Vimalate/assets/js/167.51657a7e.js"><link rel="prefetch" href="/Vimalate/assets/js/168.45537214.js"><link rel="prefetch" href="/Vimalate/assets/js/169.58ff1fb4.js"><link rel="prefetch" href="/Vimalate/assets/js/17.3ad17921.js"><link rel="prefetch" href="/Vimalate/assets/js/170.e41b1938.js"><link rel="prefetch" href="/Vimalate/assets/js/171.40f83756.js"><link rel="prefetch" href="/Vimalate/assets/js/172.4545d0f8.js"><link rel="prefetch" href="/Vimalate/assets/js/173.694d31da.js"><link rel="prefetch" href="/Vimalate/assets/js/174.09bca390.js"><link rel="prefetch" href="/Vimalate/assets/js/175.0df02e54.js"><link rel="prefetch" href="/Vimalate/assets/js/176.62c36af4.js"><link rel="prefetch" href="/Vimalate/assets/js/177.88d64280.js"><link rel="prefetch" href="/Vimalate/assets/js/178.5cc9d157.js"><link rel="prefetch" href="/Vimalate/assets/js/179.030c32bd.js"><link rel="prefetch" href="/Vimalate/assets/js/18.d9f9f8cc.js"><link rel="prefetch" href="/Vimalate/assets/js/180.a63b9bec.js"><link rel="prefetch" href="/Vimalate/assets/js/181.814bd47c.js"><link rel="prefetch" href="/Vimalate/assets/js/182.0e36882b.js"><link rel="prefetch" href="/Vimalate/assets/js/183.140fec15.js"><link rel="prefetch" href="/Vimalate/assets/js/184.ab2a4af3.js"><link rel="prefetch" href="/Vimalate/assets/js/185.1f9ff7a7.js"><link rel="prefetch" href="/Vimalate/assets/js/186.352566ec.js"><link rel="prefetch" href="/Vimalate/assets/js/187.6ee703c9.js"><link rel="prefetch" href="/Vimalate/assets/js/188.159bc843.js"><link rel="prefetch" href="/Vimalate/assets/js/189.840e996c.js"><link rel="prefetch" href="/Vimalate/assets/js/19.49f0d8c6.js"><link rel="prefetch" href="/Vimalate/assets/js/190.3a98b86f.js"><link rel="prefetch" href="/Vimalate/assets/js/191.533e72cb.js"><link rel="prefetch" href="/Vimalate/assets/js/192.6af46c57.js"><link rel="prefetch" href="/Vimalate/assets/js/193.e0601c1d.js"><link rel="prefetch" href="/Vimalate/assets/js/194.225136b2.js"><link rel="prefetch" href="/Vimalate/assets/js/195.3a31afee.js"><link rel="prefetch" href="/Vimalate/assets/js/196.1ebb3833.js"><link rel="prefetch" href="/Vimalate/assets/js/197.c38ed356.js"><link rel="prefetch" href="/Vimalate/assets/js/198.5b4e2a8a.js"><link rel="prefetch" href="/Vimalate/assets/js/199.6c582ead.js"><link rel="prefetch" href="/Vimalate/assets/js/20.d031ffa8.js"><link rel="prefetch" href="/Vimalate/assets/js/200.b01a2d89.js"><link rel="prefetch" href="/Vimalate/assets/js/201.87d9ac3f.js"><link rel="prefetch" href="/Vimalate/assets/js/202.02bb9f29.js"><link rel="prefetch" href="/Vimalate/assets/js/203.bb28ccd0.js"><link rel="prefetch" href="/Vimalate/assets/js/204.a2f2155f.js"><link rel="prefetch" href="/Vimalate/assets/js/205.a9f98339.js"><link rel="prefetch" href="/Vimalate/assets/js/206.d5bad94e.js"><link rel="prefetch" href="/Vimalate/assets/js/207.63784e7c.js"><link rel="prefetch" href="/Vimalate/assets/js/208.04ee8f74.js"><link rel="prefetch" href="/Vimalate/assets/js/209.01ffa9f8.js"><link rel="prefetch" href="/Vimalate/assets/js/21.f6ca93d4.js"><link rel="prefetch" href="/Vimalate/assets/js/210.ea61108b.js"><link rel="prefetch" href="/Vimalate/assets/js/211.48b53d76.js"><link rel="prefetch" href="/Vimalate/assets/js/212.bb8117d5.js"><link rel="prefetch" href="/Vimalate/assets/js/214.3b6c0b0f.js"><link rel="prefetch" href="/Vimalate/assets/js/215.22b388bf.js"><link rel="prefetch" href="/Vimalate/assets/js/216.353340b1.js"><link rel="prefetch" href="/Vimalate/assets/js/217.1f0eca45.js"><link rel="prefetch" href="/Vimalate/assets/js/218.9308a90f.js"><link rel="prefetch" href="/Vimalate/assets/js/219.96eda196.js"><link rel="prefetch" href="/Vimalate/assets/js/22.9d2720f3.js"><link rel="prefetch" href="/Vimalate/assets/js/220.f1d13e72.js"><link rel="prefetch" href="/Vimalate/assets/js/221.40a93584.js"><link rel="prefetch" href="/Vimalate/assets/js/222.2af7c4e6.js"><link rel="prefetch" href="/Vimalate/assets/js/223.3a426779.js"><link rel="prefetch" href="/Vimalate/assets/js/224.b19bf085.js"><link rel="prefetch" href="/Vimalate/assets/js/225.e8807465.js"><link rel="prefetch" href="/Vimalate/assets/js/226.9bcb1b57.js"><link rel="prefetch" href="/Vimalate/assets/js/227.93bfabd4.js"><link rel="prefetch" href="/Vimalate/assets/js/228.b2d6e552.js"><link rel="prefetch" href="/Vimalate/assets/js/229.f5e3bb61.js"><link rel="prefetch" href="/Vimalate/assets/js/23.385d63a4.js"><link rel="prefetch" href="/Vimalate/assets/js/230.b85722f3.js"><link rel="prefetch" href="/Vimalate/assets/js/231.4d8ae746.js"><link rel="prefetch" href="/Vimalate/assets/js/232.b5d491fe.js"><link rel="prefetch" href="/Vimalate/assets/js/233.0e667c49.js"><link rel="prefetch" href="/Vimalate/assets/js/234.eed8210a.js"><link rel="prefetch" href="/Vimalate/assets/js/235.fafeee8a.js"><link rel="prefetch" href="/Vimalate/assets/js/236.e8f0a198.js"><link rel="prefetch" href="/Vimalate/assets/js/237.6e88abd1.js"><link rel="prefetch" href="/Vimalate/assets/js/238.25105224.js"><link rel="prefetch" href="/Vimalate/assets/js/239.915dac7c.js"><link rel="prefetch" href="/Vimalate/assets/js/24.d933d218.js"><link rel="prefetch" href="/Vimalate/assets/js/240.44c02368.js"><link rel="prefetch" href="/Vimalate/assets/js/241.60f0b04f.js"><link rel="prefetch" href="/Vimalate/assets/js/242.a6100850.js"><link rel="prefetch" href="/Vimalate/assets/js/243.07a52e2f.js"><link rel="prefetch" href="/Vimalate/assets/js/244.f1f5d532.js"><link rel="prefetch" href="/Vimalate/assets/js/245.52dc7981.js"><link rel="prefetch" href="/Vimalate/assets/js/246.f0e71d71.js"><link rel="prefetch" href="/Vimalate/assets/js/247.56322546.js"><link rel="prefetch" href="/Vimalate/assets/js/248.a04222cf.js"><link rel="prefetch" href="/Vimalate/assets/js/25.89341610.js"><link rel="prefetch" href="/Vimalate/assets/js/26.b17f651d.js"><link rel="prefetch" href="/Vimalate/assets/js/27.c6ae3f92.js"><link rel="prefetch" href="/Vimalate/assets/js/28.3beab16c.js"><link rel="prefetch" href="/Vimalate/assets/js/29.3aae5353.js"><link rel="prefetch" href="/Vimalate/assets/js/3.b5376794.js"><link rel="prefetch" href="/Vimalate/assets/js/30.91afac8d.js"><link rel="prefetch" href="/Vimalate/assets/js/31.9385dcd4.js"><link rel="prefetch" href="/Vimalate/assets/js/32.443dfd1c.js"><link rel="prefetch" href="/Vimalate/assets/js/33.2cddb913.js"><link rel="prefetch" href="/Vimalate/assets/js/34.a94438b6.js"><link rel="prefetch" href="/Vimalate/assets/js/35.051f1357.js"><link rel="prefetch" href="/Vimalate/assets/js/36.538dc68b.js"><link rel="prefetch" href="/Vimalate/assets/js/37.b27bc40e.js"><link rel="prefetch" href="/Vimalate/assets/js/38.a59a7a8a.js"><link rel="prefetch" href="/Vimalate/assets/js/39.ea06bbfe.js"><link rel="prefetch" href="/Vimalate/assets/js/4.d0b9afa5.js"><link rel="prefetch" href="/Vimalate/assets/js/40.2e886f8e.js"><link rel="prefetch" href="/Vimalate/assets/js/41.c3963ea5.js"><link rel="prefetch" href="/Vimalate/assets/js/42.65496c0b.js"><link rel="prefetch" href="/Vimalate/assets/js/43.11909496.js"><link rel="prefetch" href="/Vimalate/assets/js/44.01ba1306.js"><link rel="prefetch" href="/Vimalate/assets/js/45.50f87e06.js"><link rel="prefetch" href="/Vimalate/assets/js/46.b843b381.js"><link rel="prefetch" href="/Vimalate/assets/js/47.690755fc.js"><link rel="prefetch" href="/Vimalate/assets/js/48.e9a81f9a.js"><link rel="prefetch" href="/Vimalate/assets/js/49.6f2a0cad.js"><link rel="prefetch" href="/Vimalate/assets/js/5.47547a06.js"><link rel="prefetch" href="/Vimalate/assets/js/50.32987eb9.js"><link rel="prefetch" href="/Vimalate/assets/js/51.819c293b.js"><link rel="prefetch" href="/Vimalate/assets/js/52.06a653b1.js"><link rel="prefetch" href="/Vimalate/assets/js/53.5cfc6977.js"><link rel="prefetch" href="/Vimalate/assets/js/54.b7201f91.js"><link rel="prefetch" href="/Vimalate/assets/js/55.b65909c7.js"><link rel="prefetch" href="/Vimalate/assets/js/56.84298f25.js"><link rel="prefetch" href="/Vimalate/assets/js/57.360dcf69.js"><link rel="prefetch" href="/Vimalate/assets/js/58.2d7758d3.js"><link rel="prefetch" href="/Vimalate/assets/js/59.19160135.js"><link rel="prefetch" href="/Vimalate/assets/js/6.55f52229.js"><link rel="prefetch" href="/Vimalate/assets/js/60.93318c3b.js"><link rel="prefetch" href="/Vimalate/assets/js/61.1475da5e.js"><link rel="prefetch" href="/Vimalate/assets/js/62.736e6dc5.js"><link rel="prefetch" href="/Vimalate/assets/js/63.0cde7099.js"><link rel="prefetch" href="/Vimalate/assets/js/64.7bb5d714.js"><link rel="prefetch" href="/Vimalate/assets/js/65.a4d263b8.js"><link rel="prefetch" href="/Vimalate/assets/js/66.cbdf695e.js"><link rel="prefetch" href="/Vimalate/assets/js/67.b93ad6a3.js"><link rel="prefetch" href="/Vimalate/assets/js/68.bda17f15.js"><link rel="prefetch" href="/Vimalate/assets/js/69.30fedc97.js"><link rel="prefetch" href="/Vimalate/assets/js/70.e2fd432b.js"><link rel="prefetch" href="/Vimalate/assets/js/71.d6245158.js"><link rel="prefetch" href="/Vimalate/assets/js/72.7338de98.js"><link rel="prefetch" href="/Vimalate/assets/js/73.a3508d06.js"><link rel="prefetch" href="/Vimalate/assets/js/74.4bf93d93.js"><link rel="prefetch" href="/Vimalate/assets/js/75.12401c79.js"><link rel="prefetch" href="/Vimalate/assets/js/76.316b0bb9.js"><link rel="prefetch" href="/Vimalate/assets/js/77.dc41119e.js"><link rel="prefetch" href="/Vimalate/assets/js/78.88134df0.js"><link rel="prefetch" href="/Vimalate/assets/js/79.78ec4a11.js"><link rel="prefetch" href="/Vimalate/assets/js/8.73ef7c6a.js"><link rel="prefetch" href="/Vimalate/assets/js/80.ccca7eac.js"><link rel="prefetch" href="/Vimalate/assets/js/81.ac34edde.js"><link rel="prefetch" href="/Vimalate/assets/js/82.611f53b3.js"><link rel="prefetch" href="/Vimalate/assets/js/83.e44d2a49.js"><link rel="prefetch" href="/Vimalate/assets/js/84.001aa121.js"><link rel="prefetch" href="/Vimalate/assets/js/85.43999d79.js"><link rel="prefetch" href="/Vimalate/assets/js/86.ac1d5d6a.js"><link rel="prefetch" href="/Vimalate/assets/js/87.d5e6ce9d.js"><link rel="prefetch" href="/Vimalate/assets/js/88.7d883bb3.js"><link rel="prefetch" href="/Vimalate/assets/js/89.fe981b5d.js"><link rel="prefetch" href="/Vimalate/assets/js/9.162d1b87.js"><link rel="prefetch" href="/Vimalate/assets/js/90.7bbb8025.js"><link rel="prefetch" href="/Vimalate/assets/js/91.8e45512e.js"><link rel="prefetch" href="/Vimalate/assets/js/92.0682808b.js"><link rel="prefetch" href="/Vimalate/assets/js/93.76c640fb.js"><link rel="prefetch" href="/Vimalate/assets/js/94.380a3095.js"><link rel="prefetch" href="/Vimalate/assets/js/95.cb145f63.js"><link rel="prefetch" href="/Vimalate/assets/js/96.b6cd67a3.js"><link rel="prefetch" href="/Vimalate/assets/js/97.9f5c5794.js"><link rel="prefetch" href="/Vimalate/assets/js/98.b913c1d8.js"><link rel="prefetch" href="/Vimalate/assets/js/99.e05c0be8.js">
    <link rel="stylesheet" href="/Vimalate/assets/css/0.styles.3e4debc4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Vimalate/" class="home-link router-link-active"><img src="/Vimalate/resb.jpg" alt="博客首页" class="logo"> <span class="site-name can-hide">博客首页</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Vimalate/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow down"></span></button> <button type="button" aria-label="分类" class="mobile-dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Vimalate/blog/CSS-Library/那些奇妙的 CSS .html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/Vimalate/blog/Javascript-Library/聊聊原型和原型链.html" class="nav-link">
  Javascript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="每日学习" class="dropdown-title"><span class="title">每日学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="每日学习" class="mobile-dropdown-title"><span class="title">每日学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Vimalate/LeetCode-Library/121-买卖股票最佳时机.html" class="nav-link">
  LeetCode
</a></li><li class="dropdown-item"><!----> <a href="/Vimalate/blog/CSS-Library/CSS-study.html" class="nav-link">
  琐碎
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="每日学习" class="dropdown-title"><span class="title">在线作品</span> <span class="arrow down"></span></button> <button type="button" aria-label="每日学习" class="mobile-dropdown-title"><span class="title">在线作品</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://vimalakirti.fun/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  静墨书城
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://vimalate.github.io/travel/dist" target="_blank" rel="noopener noreferrer" class="nav-link external">
  携程旅行
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Vimalate" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Vimalate/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow down"></span></button> <button type="button" aria-label="分类" class="mobile-dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Vimalate/blog/CSS-Library/那些奇妙的 CSS .html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/Vimalate/blog/Javascript-Library/聊聊原型和原型链.html" class="nav-link">
  Javascript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="每日学习" class="dropdown-title"><span class="title">每日学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="每日学习" class="mobile-dropdown-title"><span class="title">每日学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Vimalate/LeetCode-Library/121-买卖股票最佳时机.html" class="nav-link">
  LeetCode
</a></li><li class="dropdown-item"><!----> <a href="/Vimalate/blog/CSS-Library/CSS-study.html" class="nav-link">
  琐碎
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="每日学习" class="dropdown-title"><span class="title">在线作品</span> <span class="arrow down"></span></button> <button type="button" aria-label="每日学习" class="mobile-dropdown-title"><span class="title">在线作品</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://vimalakirti.fun/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  静墨书城
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://vimalate.github.io/travel/dist" target="_blank" rel="noopener noreferrer" class="nav-link external">
  携程旅行
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Vimalate" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>HTML</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Vimalate/blog/HTML-Library/HTML-Study.html" class="sidebar-link">常见HTML问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>CSS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Vimalate/blog/CSS-Library/那些奇妙的 CSS .html" class="sidebar-link">那些奇妙的 CSS</a></li><li><a href="/Vimalate/blog/CSS-Library/CSS-study.html" class="sidebar-link">CSS技巧</a></li><li><a href="/Vimalate/blog/CSS-Library/我都知道的CSS.html" class="sidebar-link">我都知道的CSS</a></li><li><a href="/Vimalate/blog/CSS-Library/layout.html" class="sidebar-link">常见布局技巧</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Javascript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Vimalate/blog/Javascript-Library/聊聊原型和原型链.html" class="sidebar-link">聊聊原型和原型链</a></li><li><a href="/Vimalate/blog/Javascript-Library/js继承.html" class="sidebar-link">js里的继承</a></li><li><a href="/Vimalate/blog/Javascript-Library/js存储和垃圾回收.html" class="sidebar-link">js存储和垃圾回收</a></li><li><a href="/Vimalate/blog/Javascript-Library/new.html" class="sidebar-link">new一个对象发生了什么</a></li><li><a href="/Vimalate/blog/Javascript-Library/了解Event Loop么.html" class="sidebar-link">了解Event Loop么</a></li><li><a href="/Vimalate/blog/Javascript-Library/ES6的Set ，WeakSet，Map和WeakMap.html" class="sidebar-link">ES6的Set ，WeakSet，Map和WeakMap</a></li><li><a href="/Vimalate/blog/Javascript-Library/常见数组方法.html" class="sidebar-link">常见数组方法</a></li><li><a href="/Vimalate/blog/Javascript-Library/常见对象方法.html" class="sidebar-link">常见对象方法</a></li><li><a href="/Vimalate/blog/Javascript-Library/字符串技巧.html" class="sidebar-link">字符串技巧</a></li><li><a href="/Vimalate/blog/Javascript-Library/解构赋值.html" class="sidebar-link">解构赋值</a></li><li><a href="/Vimalate/blog/Javascript-Library/reduce 的妙用.html" class="sidebar-link">reduce 的妙用</a></li><li><a href="/Vimalate/blog/Javascript-Library/for of 和 for in 及forEach.html" class="sidebar-link">for of 和 for in 及forEach</a></li><li><a href="/Vimalate/blog/Javascript-Library/js跳出循环的方法区别break,continue,return.html" class="sidebar-link">js跳出循环的方法区别break,continue,return</a></li><li><a href="/Vimalate/blog/Javascript-Library/我都知道的JS.html" class="sidebar-link">我都知道的JS</a></li><li><a href="/Vimalate/blog/Javascript-Library/Javascript 面试题.html" class="sidebar-link">Javascript 面试题</a></li><li><a href="/Vimalate/blog/Javascript-Library/空值合并运算符.html" class="sidebar-link">空值合并运算符</a></li><li><a href="/Vimalate/blog/Javascript-Library/常见字符串方法.html" class="sidebar-link">常见字符串方法</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vue</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Vimalate/blog/VUE-Library/vue响应原理.html" class="sidebar-link">vue响应原理</a></li><li><a href="/Vimalate/blog/VUE-Library/vue 整理面试题.html" class="sidebar-link">vue 整理面试题</a></li><li><a href="/Vimalate/blog/VUE-Library/vue项目问题总结.html" class="sidebar-link">vue项目问题总结</a></li><li><a href="/Vimalate/blog/VUE-Library/项目添加svgIcon.html" class="sidebar-link">项目添加svgIcon</a></li><li><a href="/Vimalate/blog/VUE-Library/Vue的provide、inject.html" class="sidebar-link">Vue的provide、inject</a></li><li><a href="/Vimalate/blog/VUE-Library/axios封装.html" class="sidebar-link">axios封装</a></li><li><a href="/Vimalate/blog/VUE-Library/修改Vue打包后文件的接口地址配置.html" class="sidebar-link">修改Vue打包后文件的接口地址配置</a></li><li><a href="/Vimalate/blog/VUE-Library/Vue项目启动时间太慢.html" class="sidebar-link">Vue项目启动时间太慢</a></li><li><a href="/Vimalate/blog/VUE-Library/vue项目路由权限配置.html" class="sidebar-link">vue项目路由权限配置</a></li><li><a href="/Vimalate/blog/VUE-Library/自定义指令.html" class="sidebar-link">自定义指令</a></li><li><a href="/Vimalate/blog/VUE-Library/router-view 的 key 属性.html" class="sidebar-link">router-view 的 key 属性</a></li><li><a href="/Vimalate/blog/VUE-Library/evnetbus-事件总线.html" class="sidebar-link">evnetbus-事件总线</a></li><li><a href="/Vimalate/blog/VUE-Library/vue中的$attrs和$listeners.html" class="sidebar-link">vue中的$attrs和$listeners</a></li><li><a href="/Vimalate/blog/VUE-Library/常用mixin.html" class="sidebar-link">常用mixin</a></li><li><a href="/Vimalate/blog/VUE-Library/$ref和$el区别.html" class="sidebar-link">$ref和$el区别</a></li><li><a href="/Vimalate/blog/VUE-Library/Vue使用技巧.html" class="sidebar-link">Vue使用技巧</a></li><li><a href="/Vimalate/blog/VUE-Library/Element-ui 全局默认属性配置.html" class="sidebar-link">Element-ui 全局默认属性配置</a></li><li><a href="/Vimalate/blog/VUE-Library/虚拟列表.html" class="sidebar-link">虚拟列表</a></li><li><a href="/Vimalate/blog/VUE-Library/vue 随记.html" class="sidebar-link">vue 随记</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Other</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>工程化</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Vimalate/blog/Other-Library/Git Document Library/github搜索.html" class="sidebar-link">github搜索</a></li><li><a href="/Vimalate/blog/Other-Library/Git Document Library/git常用命令和开发流程.html" class="sidebar-link">git常用命令和开发流程</a></li><li><a href="/Vimalate/blog/Other-Library/skill/git优雅提交.html" class="sidebar-link">git优雅提交</a></li><li><a href="/Vimalate/blog/Other-Library/Git Document Library/npm发布包.html" class="sidebar-link">npm发布包</a></li><li><a href="/Vimalate/blog/Other-Library/前端协作规范.html" class="sidebar-link">前端协作规范</a></li><li><a href="/Vimalate/blog/Other-Library/错误监控.html" class="sidebar-link">错误监控</a></li><li><a href="/Vimalate/blog/Other-Library/Git Document Library/webpack面试题.html" class="sidebar-link">webpack面试题</a></li><li><a href="/Vimalate/blog/Other-Library/Git Document Library/gitbook.html" class="sidebar-link">gitbook 遇到的问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端技巧</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Vimalate/blog/Other-Library/skill/skill.html" class="sidebar-link">前端常用技巧</a></li><li><a href="/Vimalate/blog/Other-Library/skill/项目利器.html" class="sidebar-link">前端常用库</a></li><li><a href="/Vimalate/blog/Other-Library/skill/excel指定行导入.html" class="sidebar-link">excel指定行导入</a></li><li><a href="/Vimalate/blog/Other-Library/skill/vscode那些老板键.html" class="sidebar-link">vscode那些老板键</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>juejin</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Vimalate/blog/juejin/20个js工具函数助力高效开发.html" class="sidebar-link">20个js工具函数助力高效开发</a></li><li><a href="/Vimalate/blog/juejin/使用VuePress搭建Element的组件库文档.html" class="sidebar-link">使用VuePress搭建Element的组件库文档</a></li><li><a href="/Vimalate/blog/juejin/当我们二次封装时我们在封装什么.html" class="sidebar-link">当我们二次封装时我们在封装什么</a></li><li><a href="/Vimalate/blog/juejin/vue项目常见问题总结.html" class="sidebar-link">vue项目常见问题总结</a></li><li><a href="/Vimalate/blog/juejin/Typescript学习指南.html" class="sidebar-link">Typescript学习指南</a></li><li><a href="/Vimalate/blog/juejin/关于首屏优化，我做了哪些.html" class="sidebar-link">关于首屏优化，我做了哪些</a></li><li><a href="/Vimalate/blog/juejin/vue3+setup+ts.html" class="sidebar-link">vue3+setup+ts</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端性能优化与实践</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Vimalate/blog/前端性能优化与实践/开篇：知识体系与小册格局.html" class="sidebar-link">开篇：知识体系与小册格局</a></li><li><a href="/Vimalate/blog/前端性能优化与实践/网络篇 1：webpack 性能调优与 Gzip 原理.html" class="sidebar-link">网络篇 1：webpack 性能调优与 Gzip 原理</a></li><li><a href="/Vimalate/blog/前端性能优化与实践/网络篇 2：图片优化——质量与性能的博弈.html" class="sidebar-link">网络篇 2：图片优化——质量与性能的博弈</a></li><li><a href="/Vimalate/blog/前端性能优化与实践/存储篇 1：浏览器缓存机制介绍与缓存策略剖析.html" class="sidebar-link">存储篇 1：浏览器缓存机制介绍与缓存策略剖析</a></li><li><a href="/Vimalate/blog/前端性能优化与实践/存储篇 2：本地存储——从 Cookie 到 Web Storage、IndexDB.html" class="sidebar-link">存储篇 2：本地存储——从 Cookie 到 Web Storage、IndexDB</a></li><li><a href="/Vimalate/blog/前端性能优化与实践/彩蛋篇：CDN 的缓存与回源机制解析.html" class="sidebar-link">彩蛋篇：CDN 的缓存与回源机制解析</a></li><li><a href="/Vimalate/blog/前端性能优化与实践/渲染篇 1：服务端渲染的探索与实践.html" class="sidebar-link">渲染篇 1：服务端渲染的探索与实践</a></li><li><a href="/Vimalate/blog/前端性能优化与实践/渲染篇 2：知己知彼——解锁浏览器背后的运行机制.html" class="sidebar-link">渲染篇 2：知己知彼——解锁浏览器背后的运行机制</a></li><li><a href="/Vimalate/blog/前端性能优化与实践/渲染篇 3：对症下药——DOM 优化原理与基本实践.html" class="sidebar-link">渲染篇 3：对症下药——DOM 优化原理与基本实践</a></li><li><a href="/Vimalate/blog/前端性能优化与实践/渲染篇 4：千方百计——Event Loop 与异步更新策略.html" class="sidebar-link">渲染篇 4：千方百计——Event Loop 与异步更新策略</a></li><li><a href="/Vimalate/blog/前端性能优化与实践/渲染篇 5：最后一击——回流（Reflow）与重绘（Repaint）.html" class="sidebar-link">渲染篇 5：最后一击——回流（Reflow）与重绘（Repaint）</a></li><li><a href="/Vimalate/blog/前端性能优化与实践/应用篇 1：优化首屏体验——Lazy-Load 初探.html" class="sidebar-link">应用篇 1：优化首屏体验——Lazy-Load 初探</a></li><li><a href="/Vimalate/blog/前端性能优化与实践/应用篇 2：事件的节流（throttle）与防抖（debounce）.html" class="sidebar-link">应用篇 2：事件的节流（throttle）与防抖（debounce）</a></li><li><a href="/Vimalate/blog/前端性能优化与实践/性能监测篇：Performance、LightHouse 与性能 API.html" class="sidebar-link">性能监测篇：Performance、LightHouse 与性能 API</a></li><li><a href="/Vimalate/blog/前端性能优化与实践/前方的路：希望以此为你的起点.html" class="sidebar-link">前方的路：希望以此为你的起点</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>使用webpack定制前端开发环境</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Vimalate/blog/使用webpack定制前端开发环境/webpack 的概念和基础使用.html" class="sidebar-link">webpack 的概念和基础使用</a></li><li><a href="/Vimalate/blog/使用webpack定制前端开发环境/webpack 如何解析代码模块路径.html" class="sidebar-link">webpack 如何解析代码模块路径</a></li><li><a href="/Vimalate/blog/使用webpack定制前端开发环境/创建自己的 loader.html" class="sidebar-link">创建自己的 loader</a></li><li><a href="/Vimalate/blog/使用webpack定制前端开发环境/创建自己的 plugin.html" class="sidebar-link">创建自己的 plugin</a></li><li><a href="/Vimalate/blog/使用webpack定制前端开发环境/搭建基本的前端开发环境.html" class="sidebar-link">搭建基本的前端开发环境</a></li><li><a href="/Vimalate/blog/使用webpack定制前端开发环境/更好地使用 webpack-dev-server.html" class="sidebar-link">更好地使用 webpack-dev-server</a></li><li><a href="/Vimalate/blog/使用webpack定制前端开发环境/开发和生产环境的构建配置差异.html" class="sidebar-link">开发和生产环境的构建配置差异</a></li><li><a href="/Vimalate/blog/使用webpack定制前端开发环境/配置 loader.html" class="sidebar-link">配置 loader</a></li><li><a href="/Vimalate/blog/使用webpack定制前端开发环境/使用 plugin.html" class="sidebar-link">使用 plugin</a></li><li><a href="/Vimalate/blog/使用webpack定制前端开发环境/探究 webpack 内部工作流程.html" class="sidebar-link">探究 webpack 内部工作流程</a></li><li><a href="/Vimalate/blog/使用webpack定制前端开发环境/提升 webpack 的构建速度.html" class="sidebar-link">提升 webpack 的构建速度</a></li><li><a href="/Vimalate/blog/使用webpack定制前端开发环境/用 HMR 提高开发效率.html" class="sidebar-link">用 HMR 提高开发效率</a></li><li><a href="/Vimalate/blog/使用webpack定制前端开发环境/优化前端资源加载 1 - 图片加载优化和代码压缩.html" class="sidebar-link">优化前端资源加载 1 - 图片加载优化和代码压缩</a></li><li><a href="/Vimalate/blog/使用webpack定制前端开发环境/优化前端资源加载 2 - 分离代码文件.html" class="sidebar-link">优化前端资源加载 2 - 分离代码文件</a></li><li><a href="/Vimalate/blog/使用webpack定制前端开发环境/优化前端资源加载 3 - 进一步控制 JS 大小.html" class="sidebar-link">优化前端资源加载 3 - 进一步控制 JS 大小</a></li><li><a href="/Vimalate/blog/使用webpack定制前端开发环境/总结.html" class="sidebar-link">总结</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><blockquote><p>vue3 于 2020 年 09 月 18 日，正式发布，2022 年 2 月 7 日 vue3 成为新的默认版本</p></blockquote> <p>距离 vue3 正式发布已经过去两年有余, 成为默认版本也过去大半年了，以前还能说是对新技术、新特性的观望，到现在面试都直问 vue3 源码了。</p> <p>我想，不管什么原因，是时候学习 vue3 了</p> <p>所以这次我也顺便把学习的过程记录下来，算个总结，也有利于日后梳理。</p> <h2 id="前置介绍"><a href="#前置介绍" class="header-anchor">#</a> 前置介绍</h2> <p>在 vue3.2 中，我们只需在script标签中添加setup。就可以做到，组件只需引入不用注册，属性和方法也不用 return 才能于 template 中使用，也不用写setup函数，也不用写export default ，甚至是自定义指令也可以在我们的template中自动获得。</p> <p>本次我们的学习也是在 setup 语法糖下进行。</p> <h2 id="环境搭建"><a href="#环境搭建" class="header-anchor">#</a> 环境搭建</h2> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> init vue@latest
</code></pre></div><h2 id="使用工具"><a href="#使用工具" class="header-anchor">#</a> 使用工具</h2> <p><code>&lt;script setup lang=&quot;ts&quot;&gt; + VSCode + Volar</code></p> <blockquote><p>安装 Volar 后，注意禁用 vetur</p></blockquote> <p>好的，准备工作已经完成，下面我们开始进入到 vue3 setup 的正式学习</p> <h2 id="ref-和-reactive"><a href="#ref-和-reactive" class="header-anchor">#</a> ref 和 reactive</h2> <ul><li>ref: 用来给基本数据类型绑定响应式数据，访问时需要通过 .value 的形式， tamplate 会自动解析,不需要 .value</li> <li>reactive: 用来给 复杂数据类型 绑定响应式数据，直接访问即可</li></ul> <blockquote><p>ref其实也是内部调用来reactive实现的</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;div&gt;
    &lt;p&gt;{{title}}&lt;/p&gt;
    &lt;h4&gt;{{userInfo}}&lt;/h4&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot;&gt;
import { ref, reactive } from &quot;vue&quot;;
type Person = {
    name: string;
    age: number;
    gender?: string;
};
const title = ref&lt;string&gt;(&quot;彼时彼刻，恰如此时此刻&quot;);
const userInfo = reactive&lt;Person&gt;({
  name: '树哥',
  age: 18
})
&lt;/script&gt;
</code></pre></div><h2 id="toref、torefs、toraw"><a href="#toref、torefs、toraw" class="header-anchor">#</a> toRef、toRefs、toRaw</h2> <h3 id="toref"><a href="#toref" class="header-anchor">#</a> toRef</h3> <p>toRef 如果原始对象是非响应式的,数据会变,但不会更新视图</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;div&gt;
     &lt;button @click=&quot;change&quot;&gt;按钮&lt;/button&gt;
     {{state}}
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot;&gt;
import { reactive, toRef } from 'vue'

const obj = {
  name: '树哥',
  age: 18
}

const state = toRef(obj, 'age')

const change = () =&gt; {
  state.value++
  console.log('obj:',obj,'state:', state);
}
&lt;/script&gt;
</code></pre></div><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3318d3d2f895427f99bd10444f3c5af3~tplv-k3u1fbpfcp-watermark.image?" alt="toRef.png"></p> <p>可以看到，点击按钮，当原始对象是非响应式时，使用toRef 的数据改变，但是试图并没有更新</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;div&gt;
    &lt;button @click=&quot;change&quot;&gt;按钮&lt;/button&gt;
    {{state}}
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot;&gt;
import { reactive, toRef } from 'vue'

const obj = reactive({
  name: '树哥',
  age: 18
})

const state = toRef(obj, 'age')

const change = () =&gt; {
  state.value++
  console.log('obj:', obj, 'state:', state);
}
&lt;/script&gt;
</code></pre></div><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b9d0bbbe7f1545e18c615cfc4164ea9d~tplv-k3u1fbpfcp-watermark.image?" alt="toRef1.png"></p> <p>当我们把 obj 用 reactive 包裹，再使用 toRef，点击按钮时，可以看到视图和数据都变了</p> <blockquote><p>toRef返回的值是否具有响应性取决于被解构的对象本身是否具有响应性。响应式数据经过toRef返回的值仍具有响应性，非响应式数据经过toRef返回的值仍没有响应性。</p></blockquote> <h3 id="torefs"><a href="#torefs" class="header-anchor">#</a> toRefs</h3> <p>toRefs相当于对对象内每个属性调用toRef，toRefs返回的对象内的属性使用时需要加.value,主要是方便我们解构使用</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;div&gt;
    &lt;button @click=&quot;change&quot;&gt;按钮&lt;/button&gt;
    name--{{name}}---age{{age}}
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot;&gt;
import { reactive, toRefs } from 'vue'

const obj = reactive({
  name: '树哥',
  age: 18
})

let { name, age } = toRefs(obj)

const change = () =&gt; {
  age.value++
  name.value = '张麻子'
  console.log('obj:', obj);
  console.log('name:', name);
  console.log('age:', age);
}
&lt;/script&gt;
</code></pre></div><p>简单理解就是批量版的toRef,(<strong>其源码实现也正是通过对象循环调用了toRef</strong>)</p> <h2 id="toraw"><a href="#toraw" class="header-anchor">#</a> toRaw</h2> <p>将响应式对象修改为普通对象</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;div&gt;
    &lt;button @click=&quot;change&quot;&gt;按钮&lt;/button&gt;
    {{data}}
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot;&gt;
import { reactive, toRaw } from 'vue'

const obj = reactive({
  name: '树哥',
  age: 18
})

const data = toRaw(obj)

const change = () =&gt; {
  data.age = 19
  console.log('obj:', obj, 'data:', data);
}
&lt;/script&gt;
</code></pre></div><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/92749f19830c49cf98f3b4f5adc691de~tplv-k3u1fbpfcp-watermark.image?" alt="toRaw.png"></p> <p>数据能变化，视图不变化(失去响应式)</p> <h2 id="computed"><a href="#computed" class="header-anchor">#</a> computed</h2> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;div&gt;
    &lt;p&gt;{{title}}&lt;/p&gt;
    &lt;h4&gt;{{userInfo}}&lt;/h4&gt;
    &lt;h1&gt;{{add}}&lt;/h1&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot;&gt;
import { ref, reactive,computed } from &quot;vue&quot;;
const count = ref(0)

// 推导得到的类型：ComputedRef&lt;number&gt;
const add = computed(() =&gt; count.value +1)

&lt;/script&gt;
</code></pre></div><h2 id="watch"><a href="#watch" class="header-anchor">#</a> watch</h2> <p>vue3 watch 的作用和 Vue2 中的 watch 作用是一样的，他们都是用来监听响应式状态发生变化的，当响应式状态发生变化时，就会触发一个回调函数。</p> <div class="language- extra-class"><pre class="language-text"><code>watch(data,()=&gt;{},{})
</code></pre></div><ul><li><p>参数一，监听的数据</p></li> <li><p>参数二，数据改变时触发的回调函数（newVal,oldVal）</p></li> <li><p>参数三，options配置项，为一个对象</p></li> <li><p>1、监听ref定义的一个响应式数据</p></li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;script setup lang=&quot;ts&quot;&gt;
import { ref, watch } from &quot;vue&quot;;

const str = ref('彼时彼刻')

//3s后改变str的值
setTimeout(() =&gt; { str.value = '恰如此时此刻' }, 3000)

watch(str, (newV, oldV) =&gt; {
  console.log(newV, oldV) //恰如此时此刻 彼时彼刻
})

&lt;/script&gt;
</code></pre></div><ul><li>2、监听多个ref</li></ul> <p><strong>这时候写法变为数组的形式</strong></p> <div class="language- extra-class"><pre class="language-text"><code>&lt;script setup lang=&quot;ts&quot;&gt;
import { ref, watch } from &quot;vue&quot;;

let name = ref('树哥')
let age = ref(18)

//3s后改变值
setTimeout(() =&gt; {
  name.value = '我叫树哥'
  age.value = 19
}, 3000)

watch([name, age], (newV, oldV) =&gt; {
  console.log(newV, oldV) // ['我叫树哥', 19]  ['树哥', 18]
})

&lt;/script&gt;
</code></pre></div><ul><li>3、监听Reactive定义的响应式对象</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;script setup lang=&quot;ts&quot;&gt;
import { reactive, watch } from &quot;vue&quot;;

let info = reactive({
  name: '树哥',
  age: 18
})

//3s后改变值
setTimeout(() =&gt; {
  info.age = 19
}, 3000)

watch(info, (newV, oldV) =&gt; {
  console.log(newV, oldV) 
})

&lt;/script&gt;
</code></pre></div><p>当 watch 监听的是一个响应式对象时，会隐式地创建一个深层侦听器，即该响应式对象里面的任何属性发生变化，都会触发监听函数中的回调函数。<strong>即当 watch 监听的是一个响应式对象时，默认开启 deep：true</strong></p> <ul><li>4、监听reactive 定义响应式对象的单一属性</li></ul> <p>错误写法：</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;script setup lang=&quot;ts&quot;&gt;
import { reactive, watch } from &quot;vue&quot;;

let info = reactive({
  name: '树哥',
  age: 18
})

//3s后改变值
setTimeout(() =&gt; {
  info.age = 19
}, 3000)


watch(info.age, (newV, oldV) =&gt; {
  console.log(newV, oldV) 
})

&lt;/script&gt;
</code></pre></div><p>可以看到控制台出现警告</p> <div class="language- extra-class"><pre class="language-text"><code>[Vue warn]: Invalid watch source:  18 A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types. 
  at &lt;Index&gt; 
  at &lt;App&gt;
</code></pre></div><p>如果我们非要监听响应式对象中的某个属性，我们可以使用 getter 函数的形式,<strong>即将watch第一个参数修改成一个回调函数的形式</strong></p> <p>正确写法：</p> <div class="language- extra-class"><pre class="language-text"><code>// 其他不变
watch(()=&gt;info.age, (newV, oldV) =&gt; {
  console.log(newV, oldV) // 19 18
})
</code></pre></div><ul><li>5、监听reactive定义的 引用数据</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;script setup lang=&quot;ts&quot;&gt;
import { reactive, watch } from &quot;vue&quot;;

let info = reactive({
  name: '张麻子',
  age: 18,
  obj: {
    str: '彼时彼刻，恰如此时此刻'
  }
})

//3s后改变s值
setTimeout(() =&gt; {
  info.obj.str = 'to be or not to be'
}, 3000)

// 需要自己开启 deep:true深度监听,不然不发触发 watch 的回调函数
watch(() =&gt; info.obj, (newV, oldV) =&gt; {
  console.log(newV, oldV)
}, {
  deep: true
})

&lt;/script&gt;
</code></pre></div><h2 id="watcheffect"><a href="#watcheffect" class="header-anchor">#</a> WatchEffect</h2> <p>会立即执行传入的一个函数，同时响应式追踪其依赖，并在其依赖变更时重新运行该函数。（有点像计算属性）</p> <p>如果用到 a 就只会监听 a, 就是用到几个监听几个 而且是非惰性,会默认调用一次</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;script setup lang=&quot;ts&quot;&gt;
import { ref, watchEffect } from &quot;vue&quot;;

let num = ref(0)

//3s后改变值
setTimeout(() =&gt; {
  num.value++
}, 3000)

watchEffect(() =&gt; {
  console.log('num 值改变：', num.value)
})

&lt;/script&gt;
</code></pre></div><p>可以在控制台上看到，第一次进入页面时，打印出<code>num 值改变：0</code>,三秒后，再次打印<code>num 值改变：1</code></p> <ul><li>停止监听</li></ul> <p>当 watchEffect 在组件的 setup() 函数或生命周期钩子被调用时，侦听器会被链接到该组件的生命周期，并在组件卸载时自动停止。</p> <p>但是我们采用异步的方式创建了一个监听器，这个时候监听器没有与当前组件绑定，所以即使组件销毁了，监听器依然存在。</p> <p>这个时候我们可以显式调用停止监听</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;script setup lang=&quot;ts&quot;&gt;
import { watchEffect } from 'vue'
// 它会自动停止
watchEffect(() =&gt; {})
// ...这个则不会！
setTimeout(() =&gt; {
  watchEffect(() =&gt; {})
}, 100)

const stop = watchEffect(() =&gt; {
  /* ... */
})

// 显式调用
stop()
&lt;/script&gt;
</code></pre></div><ul><li>清除副作用（onInvalidate）</li></ul> <p>watchEffect 的第一个参数——effect函数——可以接收一个参数：叫onInvalidate，也是一个函数，用于清除 effect 产生的副作用</p> <p>就是在触发监听之前会调用一个函数可以处理你的逻辑，例如防抖</p> <div class="language- extra-class"><pre class="language-text"><code>import { ref, watchEffect } from &quot;vue&quot;;

let num = ref(0)

//3s后改变值
setTimeout(() =&gt; {
  num.value++
}, 3000)

watchEffect((onInvalidate) =&gt; {
  console.log(num.value)
  onInvalidate(() =&gt; {
    console.log('执行');
  });
})
</code></pre></div><p>控制台依次输出：0 =&gt; 执行 =&gt; 1</p> <ul><li>配置选项</li></ul> <p>watchEffect的第二个参数，用来定义副作用刷新时机，可以作为一个调试器来使用</p> <p>flush （更新时机）：</p> <ul><li>1、pre：组件更新前执行</li> <li>2、sync：强制效果始终同步触发</li> <li>3、post：组件更新后执行</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;script setup lang=&quot;ts&quot;&gt;
import { ref, watchEffect } from &quot;vue&quot;;

let num = ref(0)

//3s后改变值
setTimeout(() =&gt; {
  num.value++
}, 3000)

watchEffect((onInvalidate) =&gt; {
  console.log(num.value)
  onInvalidate(() =&gt; {
    console.log('执行');
  });
}, {
  flush: &quot;post&quot;, //此时这个函数会在组件更新之后去执行
  onTrigger(e) { //作为一个调试工具，可在开发中方便调试
    console.log('触发', e);
  },
})
&lt;/script&gt;
</code></pre></div><h2 id="生命周期"><a href="#生命周期" class="header-anchor">#</a> 生命周期</h2> <p>和 vue2 相比的话，基本上就是将 Vue2 中的beforeDestroy名称变更成beforeUnmount; destroyed 表更为 unmounted；然后用setup代替了两个钩子函数 beforeCreate 和 created；新增了两个开发环境用于调试的钩子</p> <p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9d0471468f464abbaa0ecc656fb21591~tplv-k3u1fbpfcp-watermark.image?" alt="smzq.jpg"></p> <h2 id="父子组件传参"><a href="#父子组件传参" class="header-anchor">#</a> 父子组件传参</h2> <ul><li>defineProps</li></ul> <p>父组件传参</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;Children :msg=&quot;msg&quot; :list=&quot;list&quot;&gt;&lt;/Children&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot;&gt;
import { ref, reactive } from 'vue'
import Children from './Children.vue'

const msg = ref('hello 啊，树哥')
const list = reactive&lt;number[]&gt;([1, 2, 3])
&lt;/script&gt;
</code></pre></div><blockquote><p>在 script setup 中，引入的组件会自动注册，所以可以直接使用，无需再通过components进行注册</p></blockquote> <p>子组件接受值</p> <p>defineProps 来接收父组件传递的值， <strong>defineProps是无须引入的直接使用即可</strong></p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;div&gt;
    &lt;p&gt;msg：{{msg}}&lt;/p&gt;
    &lt;p&gt;list：{{list}}&lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot;&gt;
defineProps&lt;{
  msg: string,
  list: number[]
}&gt;()
&lt;/script&gt;
</code></pre></div><p>使用 withDefaults 定义默认值</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;div&gt;
    &lt;p&gt;msg：{{msg}}&lt;/p&gt;
    &lt;p&gt;list：{{list}}&lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot;&gt;
type Props = {
  msg?: string,
  list?: number[]
}

// withDefaults 的第二个参数便是默认参数设置，会被编译为运行时 props 的 default 选项
withDefaults(defineProps&lt;Props&gt;(), {
  msg: '张麻子',
  list: () =&gt; [4, 5, 6]
})
&lt;/script&gt;
</code></pre></div><p>子组件向父组件抛出事件</p> <ul><li>defineEmits</li></ul> <p>子组件派发事件</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;div&gt;
    &lt;p&gt;msg：{{msg}}&lt;/p&gt;
    &lt;p&gt;list：{{list}}&lt;/p&gt;
    &lt;button @click=&quot;onChangeMsg&quot;&gt;改变msg&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot;&gt;
type Props = {
  msg?: string,
  list?: number[]
}

withDefaults(defineProps&lt;Props&gt;(), {
  msg: '张麻子',
  list: () =&gt; [4, 5, 6]
})

const emits = defineEmits(['changeMsg'])
const onChangeMsg = () =&gt; {
emits('changeMsg','黄四郎')
}
&lt;/script&gt;
</code></pre></div><p>子组件绑定了一个click 事件 然后通过defineEmits 注册了一个自定义事件,点击按钮的时候，触发 emit 调用我们注册的事件，传递参数</p> <p>父组件接收</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;Children :msg=&quot;msg&quot; :list=&quot;list&quot; @changeMsg=&quot;changeMsg&quot;&gt;&lt;/Children&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot;&gt;
import { ref, reactive } from 'vue'
import Children from './Children.vue'

const msg = ref('hello 啊，树哥')
const list = reactive&lt;number[]&gt;([1, 2, 3])

const changeMsg = (v: string) =&gt; {
  msg.value = v
}
&lt;/script&gt;
</code></pre></div><ul><li>获取子组件的实例和内部属性</li></ul> <p>在 script-setup 模式下，所有数据只是默认 return 给 template 使用，不会暴露到组件外，所以父组件是无法直接通过挂载 ref 变量获取子组件的数据。</p> <p>如果要调用子组件的数据，需要先在子组件显示的暴露出来，才能够正确的拿到，这个操作，就是由 defineExpose 来完成。</p> <p>子组件</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;p&gt;{{name}}&lt;/p&gt;
&lt;/template&gt;

&lt;script lang=&quot;ts&quot; setup&gt;
import { ref } from 'vue'

const name = ref('张麻子')
const changeName = () =&gt; {
  name.value = '县长'
}
// 将方法、变量暴露给父组件使用，父组件才可通过 ref API拿到子组件暴露的数据
defineExpose({
  name,
  changeName
})
&lt;/script&gt;
</code></pre></div><p>父组件</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;div&gt;
    &lt;child ref='childRef' /&gt;
    &lt;button @click=&quot;getName&quot;&gt;获取子组件中的数据&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script lang=&quot;ts&quot; setup&gt;
import { ref } from 'vue'
import child from './Child.vue'

// 子组件ref（TypeScript语法）
const childRef = ref&lt;InstanceType&lt;typeof child&gt;&gt;()

const getName = () =&gt; {
  // 获取子组件name
  console.log(childRef.value!.name)
  // 执行子组件方法
  childRef.value?.changeName()
  // 获取修改后的name
  console.log(childRef.value!.name)
}
&lt;/script&gt;
</code></pre></div><blockquote><p>注意：defineProps 、defineEmits 、 defineExpose 和 withDefaults 这四个宏函数只能在 <code>&lt;script setup&gt;</code> 中使用。他们不需要导入，会随着<code>&lt;script setup&gt;</code>的处理过程中一起被编译。</p></blockquote> <h2 id="插槽"><a href="#插槽" class="header-anchor">#</a> 插槽</h2> <p>在 Vue2 的中一般中具名插槽和作用域插槽分别使用slot和slot-scope来实现，如：</p> <p>父组件</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;div&gt;
    &lt;p style=&quot;color:red&quot;&gt;父组件&lt;/p&gt;
    &lt;Child ref='childRef'&gt;
      &lt;template slot=&quot;content&quot; slot-scope=&quot;{ msg }&quot;&gt;
        &lt;div&gt;{{ msg }}&lt;/div&gt;
      &lt;/template&gt;
    &lt;/Child&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script lang=&quot;ts&quot; setup&gt;
import Child from './Child.vue'
&lt;/script&gt;
</code></pre></div><p>子组件</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;div&gt;child&lt;/div&gt;
  &lt;slot name=&quot;content&quot; msg=&quot;hello 啊，树哥!&quot;&gt;&lt;/slot&gt;
&lt;/template&gt;
</code></pre></div><p>在 Vue3 中将slot和slot-scope进行了合并统一使用，使用 v-slot， <code>v-slot:slotName</code> 简写 <code>#slotName</code></p> <p>父组件</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;div&gt;
    &lt;p style=&quot;color:red&quot;&gt;父组件&lt;/p&gt;
    &lt;Child&gt;
      &lt;template  v-slot:content=&quot;{ msg }&quot;&gt;
        &lt;div&gt;{{ msg }}&lt;/div&gt;
      &lt;/template&gt;
    &lt;/Child&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script lang=&quot;ts&quot; setup&gt;
import Child from './Child.vue'
&lt;/script&gt;

&lt;!-- 简写 --&gt;
&lt;Child&gt;
  &lt;template #content=&quot;{ msg }&quot;&gt;
    &lt;div&gt;{{ msg }}&lt;/div&gt;
      &lt;/template&gt;
&lt;/Child&gt;
</code></pre></div><blockquote><p>实际上,v-slot 在 Vue2.6+ 的版本就可以使用。</p></blockquote> <h2 id="异步组件"><a href="#异步组件" class="header-anchor">#</a> 异步组件</h2> <p>通过 defineAsyncComponent 异步加载</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;Children :msg=&quot;msg&quot; :list=&quot;list&quot; @changeMsg=&quot;changeMsg&quot;&gt;&lt;/Children&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot;&gt;
import { ref, reactive,defineAsyncComponent } from 'vue'
// import Children from './Children.vue'
const Children = defineAsyncComponent(() =&gt; import('./Children.vue'))
&lt;/script&gt;
</code></pre></div><h2 id="suspense"><a href="#suspense" class="header-anchor">#</a> Suspense</h2> <p>Suspense 允许应用程序在等待异步组件时渲染一些其它内容,在 Vue2 中，必须使用条件判断(例如 v-if、 v-else等)来检查数据是否已加载并显示一些其它内容；但是，在 Vue3 新增了 Suspense 了，就不必跟踪何时加载数据并呈现相应的内容。</p> <p>他是一个带插槽的组件，只是它的插槽指定了default 和 fallback 两种状态。</p> <p>Suspense 使用：</p> <ul><li>1、使用 <code>&lt;Suspense&gt;&lt;/Suspense&gt;</code> 包裹所有异步组件相关代码</li> <li>2、<code>&lt;template v-slot:default&gt;&lt;/template&gt;</code> 插槽包裹异步组件</li> <li>3、<code>&lt;template v-slot:fallback&gt;&lt;/template&gt;</code> 插槽包裹渲染异步组件渲染之前的内容</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;Suspense&gt;
    &lt;template #default&gt;
      &lt;!-- 异步组件-默认渲染的页面 --&gt;
      &lt;Children :msg=&quot;msg&quot; :list=&quot;list&quot; @changeMsg=&quot;changeMsg&quot;&gt;&lt;/Children&gt;
    &lt;/template&gt;
    &lt;template #fallback&gt;
      &lt;!-- 页面还没加载出来展示的页面 --&gt;
      &lt;div&gt;loading...&lt;/div&gt;
    &lt;/template&gt;
  &lt;/Suspense&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot;&gt;
import { ref, reactive, defineAsyncComponent } from 'vue'
const Children = defineAsyncComponent(() =&gt; import('./Children.vue'))
&lt;/script&gt;
</code></pre></div><h2 id="teleport传送组件"><a href="#teleport传送组件" class="header-anchor">#</a> Teleport传送组件</h2> <p>Teleport 是一种能够将我们的模板渲染至指定DOM节点，不受父级style、v-show等属性影响，但data、prop数据依旧能够共用的技术</p> <p>主要解决的问题：因为Teleport节点挂载在其他指定的DOM节点下，完全不受父级style样式影响</p> <p>使用：
通过to 属性插入到指定元素位置，如 body，html，自定义className等等。</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;!-- 插入至 body --&gt;
  &lt;Teleport to=&quot;body&quot;&gt;
    &lt;Children&gt;&lt;/Children&gt;
  &lt;/Teleport&gt;
  &lt;!-- 默认 #app 下 --&gt;
  &lt;Children&gt;&lt;/Children&gt;
&lt;/template&gt;
&lt;script lang=&quot;ts&quot; setup&gt;
import Children from './Children.vue'
&lt;/script&gt;
</code></pre></div><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b45c3137623a4f8ca1a41f65e490a61a~tplv-k3u1fbpfcp-watermark.image?" alt="Teleport.png"></p> <h2 id="keep-alive-缓存组件"><a href="#keep-alive-缓存组件" class="header-anchor">#</a> keep-alive 缓存组件</h2> <ul><li>作用和vue2一致，只是生命周期名称有所更改</li> <li>初次进入时： onMounted&gt; onActivated</li> <li>退出后触发 deactivated</li> <li>再次进入：只会触发 onActivated</li></ul> <blockquote><p>事件挂载的方法等，只执行一次的放在 onMounted中；组件每次进去执行的方法放在 onActivated中</p></blockquote> <h2 id="provide-inject"><a href="#provide-inject" class="header-anchor">#</a> provide/inject</h2> <p>provide 可以在祖先组件中指定我们想要提供给后代组件的数据或方法，而在任何后代组件中，我们都可以使用 inject 来接收 provide 提供的数据或方法。</p> <p>父组件</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;Children&gt;&lt;/Children&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot;&gt;
import { ref, provide } from 'vue'
import Children from &quot;./Children.vue&quot;

const msg = ref('hello 啊，树哥')

provide('msg', msg)
&lt;/script&gt;
</code></pre></div><p>子组件</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;div&gt;
    &lt;p&gt;msg：{{msg}}&lt;/p&gt;
    &lt;button @click=&quot;onChangeMsg&quot;&gt;改变msg&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot;&gt;
import { inject, Ref, ref } from 'vue'

const msg = inject&lt;Ref&lt;string&gt;&gt;('msg',ref('hello啊！'))
const onChangeMsg = () =&gt; {
  msg.value = 'shuge'
}
&lt;/script&gt;
</code></pre></div><blockquote><p>如果你想要传入的值能响应式的改变，需要通过ref 或 reactive 添加响应式</p></blockquote> <h2 id="v-model-升级"><a href="#v-model-升级" class="header-anchor">#</a> v-model 升级</h2> <p>v-model 在vue3可以说是破坏式更新，改动还是不少的</p> <p>我们都知道，v-model 是props 和 emit 组合而成的语法糖,vue3中 v-model 有以下改动</p> <ul><li>变更：value =&gt; modelValue</li> <li>变更：update:input =&gt; update:modelValue</li> <li>新增：一个组件可以设置多个 v-model</li> <li>新增：开发者可以自定义 v-model修饰符</li> <li>v-bind 的 .sync 修饰符和组件的 model 选项已移除</li></ul> <p>子组件</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;div&gt;
    &lt;p&gt;{{msg}}，{{modelValue}}&lt;/p&gt;
    &lt;button @click=&quot;onChangeMsg&quot;&gt;改变msg&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot;&gt;

type Props = {
  modelValue: string,
  msg: string
}
defineProps&lt;Props&gt;()
const emit = defineEmits(['update:modelValue', 'update:msg'])

const onChangeMsg = () =&gt; {
  // 触发父组件的值更新
  emit('update:modelValue', '恰如此时此刻')
  emit('update:msg', '彼时彼刻')
}
&lt;/script&gt;
</code></pre></div><p>父组件</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  // v-model:modelValue简写为v-model
  // 绑定多个v-model
  &lt;Children v-model=&quot;name&quot; v-model:msg=&quot;msg&quot;&gt;&lt;/Children&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot;&gt;
import { ref } from 'vue'
import Children from &quot;./Children.vue&quot;

const msg = ref('hello啊')
const name = ref('树哥')
&lt;/script&gt;
</code></pre></div><h2 id="自定义指令"><a href="#自定义指令" class="header-anchor">#</a> 自定义指令</h2> <p>自定义指令的生命周期</p> <ul><li>created 元素初始化的时候</li> <li>beforeMount 指令绑定到元素后调用 只调用一次</li> <li>mounted 元素插入父级dom调用</li> <li>beforeUpdate 元素被更新之前调用</li> <li>update 这个周期方法被移除 改用updated</li> <li>beforeUnmount 在元素被移除前调用</li> <li>unmounted 指令被移除后调用 只调用一次</li></ul> <p>实现一个自定义拖拽指令</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;div v-move class=&quot;box&quot;&gt;
    &lt;div class=&quot;header&quot;&gt;&lt;/div&gt;
    &lt;div&gt;
      内容
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;
 
&lt;script setup lang='ts'&gt;
import { Directive } from &quot;vue&quot;;
const vMove: Directive = {
  mounted(el: HTMLElement) {
    let moveEl = el.firstElementChild as HTMLElement;
    const mouseDown = (e: MouseEvent) =&gt; {
      //鼠标点击物体那一刻相对于物体左侧边框的距离=点击时的位置相对于浏览器最左边的距离-物体左边框相对于浏览器最左边的距离
      console.log(e.clientX, e.clientY, &quot;起始位置&quot;, el.offsetLeft);
      let X = e.clientX - el.offsetLeft;
      let Y = e.clientY - el.offsetTop;
      const move = (e: MouseEvent) =&gt; {
        el.style.left = e.clientX - X + &quot;px&quot;;
        el.style.top = e.clientY - Y + &quot;px&quot;;
        console.log(e.clientX, e.clientY, &quot;位置改变&quot;);
      };
      document.addEventListener(&quot;mousemove&quot;, move);
      document.addEventListener(&quot;mouseup&quot;, () =&gt; {
        document.removeEventListener(&quot;mousemove&quot;, move);
      });
    };
    moveEl.addEventListener(&quot;mousedown&quot;, mouseDown);
  },
};
&lt;/script&gt;
 
&lt;style &gt;
.box {
  position: fixed;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 200px;
  height: 200px;
  border: 1px solid #ccc;
}

.header {
  height: 20px;
  background: black;
  cursor: move;
}
&lt;/style&gt;
</code></pre></div><h2 id="自定义-hooks"><a href="#自定义-hooks" class="header-anchor">#</a> 自定义 hooks</h2> <p>我们都知道在 vue 中有个东西叫 mixins，他可以将多个组件中相同的逻辑抽离出来，实现一次写代码，多组件受益的效果。</p> <p>但是 mixins 的副作用就是引用的多了变量的来源就不清晰了，而且还会有变量来源不明确,不利于阅读，容易使代码变得难以维护。</p> <ul><li>Vue3 的 hook函数 相当于 vue2 的 mixin, 不同在与 hooks 是函数</li> <li>Vue3 的 hook函数 可以帮助我们提高代码的复用性, 让我们能在不同的组件中都利用 hooks 函数</li></ul> <p><strong>useWindowResize</strong></p> <p>我们来实现一个窗口改变时获取宽高的 hook</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted<span class="token punctuation">,</span> onUnmounted<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">useWindowResize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> width <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> height <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">onResize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    width<span class="token punctuation">.</span>value <span class="token operator">=</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">;</span>
    height<span class="token punctuation">.</span>value <span class="token operator">=</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;resize&quot;</span><span class="token punctuation">,</span> onResize<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">onResize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">onUnmounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;resize&quot;</span><span class="token punctuation">,</span> onResize<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    width<span class="token punctuation">,</span>
    height
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> useWindowResize<span class="token punctuation">;</span>
</code></pre></div><p>使用：</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;h3&gt;屏幕尺寸&lt;/h3&gt;
  &lt;div&gt;宽度：{{ width }}&lt;/div&gt;
  &lt;div&gt;高度：{{ height }}&lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot;&gt;
import useWindowResize from &quot;../hooks/useWindowResize.ts&quot;;
const { width, height } = useWindowResize();
&lt;/script&gt;
</code></pre></div><h2 id="style-v-bind-css变量注入"><a href="#style-v-bind-css变量注入" class="header-anchor">#</a> style v-bind CSS变量注入</h2> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;span&gt; style v-bind CSS变量注入&lt;/span&gt;  
&lt;/template&gt;
&lt;script lang=&quot;ts&quot; setup&gt;
  import { ref } from 'vue'
  const color = ref('red')
&lt;/script&gt;
&lt;style scoped&gt;
  span {
    /* 使用v-bind绑定组件中定义的变量 */
    color: v-bind('color');
  }  
&lt;/style&gt;
</code></pre></div><h2 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h2> <p><a href="https://blog.csdn.net/lgno2/article/details/109446711" target="_blank" rel="noopener noreferrer">Vue3使用TypeScript的正确姿势<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <br> <a href="https://juejin.cn/post/7122760155707473956" target="_blank" rel="noopener noreferrer">超极速的Vue3上手指北🔥<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <br> <a href="https://juejin.cn/post/6940454764421316644#heading-26" target="_blank" rel="noopener noreferrer">Vue3.0 新特性以及使用经验总结<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <br> <a href="https://xiaoman.blog.csdn.net/article/details/123228132?spm=1001.2014.3001.5502" target="_blank" rel="noopener noreferrer">自定义指令directive<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="往期回顾"><a href="#往期回顾" class="header-anchor">#</a> 往期回顾</h2> <p><a href="https://juejin.cn/post/7124117404187099172" target="_blank" rel="noopener noreferrer">2022年了，我才开始学 typescript ，晚吗？（7.5k字总结）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <br> <a href="https://juejin.cn/post/7127925414885851144" target="_blank" rel="noopener noreferrer">当我们对组件二次封装时我们在封装什么<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <br> <a href="https://juejin.cn/post/7119018849353072677" target="_blank" rel="noopener noreferrer">vue 项目开发，我遇到了这些问题<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <br> <a href="https://juejin.cn/post/7117515006714839047" target="_blank" rel="noopener noreferrer">关于首屏优化，我做了哪些<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/25/2022, 4:01:18 PM</span></div></footer> <!----> </main></div><div class="global-ui"><!----><!----><canvas id="vuepress-canvas-cursor"></canvas><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:68px;bottom:190px;display:none;" data-v-5775ee02>
      欢迎来到 博客首页
    </div> <div class="operation" style="right:90px;bottom:40px;display:;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:;" data-v-5775ee02></i></div> <canvas id="banniang" width="150" height="220" class="live2d" style="right:90px;bottom:-20px;opacity:0.9;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    看板娘
  </div></div></div></div>
    <script src="/Vimalate/assets/js/app.a925979d.js" defer></script><script src="/Vimalate/assets/js/2.ac384c18.js" defer></script><script src="/Vimalate/assets/js/213.d07b4ced.js" defer></script><script src="/Vimalate/assets/js/7.0ea86ada.js" defer></script>
  </body>
</html>
